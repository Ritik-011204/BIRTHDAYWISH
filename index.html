<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Puzzle Adventure for My Love! 💖</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #ff6b8b;
            --secondary: #ffa8c2;
            --accent: #ffd3e0;
            --dark: #d63384;
            --light: #fff5f7;
            --text: #4a1e35;
            --gold: #ffd700;
            --sparkle: #fffacd;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(-45deg, #6bfaff, #ffa8c2, #ffd3e0, #fff5f7);
            background-size: 400% 400%;
            color: var(--text);
            overflow-x: hidden;
            min-height: 100vh;
            animation: gradientShift 15s ease infinite;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Puzzle Stages */
        .puzzle-stage {
            display: none;
            min-height: 100vh;
            padding: 2rem 0;
            align-items: center;
            justify-content: center;
        }

        .stage-active {
            display: flex;
        }

        .puzzle-container {
            background: rgba(255, 255, 255, 0.15);
            -webkit-backdrop-filter: blur(20px);
            backdrop-filter: blur(20px);
            padding: 3rem;
            border-radius: 30px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            max-width: 800px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            animation: puzzleAppear 0.8s ease-out;
        }

        @keyframes puzzleAppear {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .puzzle-title {
            font-family: 'Dancing Script', cursive;
            font-size: 3.5rem;
            background: linear-gradient(45deg, var(--primary), var(--gold), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1.5rem;
        }

        .puzzle-instruction {
            color: white;
            font-size: 1.3rem;
            margin-bottom: 2rem;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        /* Puzzle 1: Heart Lock */
        .heart-lock {
            width: 200px;
            height: 200px;
            margin: 0 auto 2rem;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .heart-lock:hover {
            transform: scale(1.1);
        }

        .heart-piece {
            position: absolute;
            width: 100px;
            height: 100px;
            background: var(--primary);
            transform-origin: center;
            transition: all 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            border-radius: 10px;
        }

        .piece-1 { top: 0; left: 50px; transform: rotate(0deg); }
        .piece-2 { top: 50px; left: 0; transform: rotate(90deg); }
        .piece-3 { top: 50px; left: 100px; transform: rotate(-90deg); }
        .piece-4 { top: 100px; left: 50px; transform: rotate(180deg); }

        .heart-lock.solved .heart-piece {
            background: var(--gold);
            transform: rotate(0deg) !important;
            top: 50px !important;
            left: 50px !important;
        }

        /* Puzzle 2: Memory Game */
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 2rem auto;
            max-width: 400px;
        }

        .memory-card {
            width: 80px;
            height: 80px;
            background: linear-gradient(45deg, var(--primary), var(--dark));
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            cursor: pointer;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            position: relative;
        }

        .memory-card.flipped {
            transform: rotateY(180deg);
            background: var(--gold);
        }

        .memory-card.matched {
            background: var(--gold);
            transform: scale(0.95);
            animation: matchedPulse 0.5s ease;
        }

        @keyframes matchedPulse {
            0%, 100% { transform: scale(0.95); }
            50% { transform: scale(1.1); }
        }

        /* Puzzle 3: Love Code */
        .code-input {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 2rem 0;
        }

        .code-digit {
            width: 60px;
            height: 80px;
            background: rgba(255, 255, 255, 0.2);
            border: 3px solid var(--primary);
            border-radius: 15px;
            font-size: 2.5rem;
            text-align: center;
            color: white;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .code-digit:focus {
            outline: none;
            border-color: var(--gold);
            background: rgba(255, 215, 0, 0.2);
            transform: scale(1.1);
        }

        /* Final Wish */
        .final-wish {
            text-align: center;
            padding: 2rem 0;
        }

        .wish-title {
            font-family: 'Dancing Script', cursive;
            font-size: 4rem;
            background: linear-gradient(45deg, var(--primary), var(--gold), var(--secondary), var(--dark));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 2rem;
            animation: titleShine 3s infinite alternate;
        }

        @keyframes titleShine {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }

        .wish-message {
            font-size: 1.5rem;
            color: white;
            line-height: 1.8;
            margin-bottom: 3rem;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .love-signature {
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem;
            color: var(--gold);
            margin: 3rem 0;
        }

        /* Flip Cards Section */
        .flip-cards {
            display: flex;
            flex-direction: column;
            gap: 2rem;
            margin: 3rem 0;
        }

        .flip-card {
            background: transparent;
            perspective: 1000px;
            height: 300px;
            border-radius: 20px;
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s;
            transform-style: preserve-3d;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }

        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }

        .flip-card-front {
            background: linear-gradient(135deg, var(--primary), var(--dark));
            color: white;
        }

        .flip-card-back {
            background: rgba(255, 255, 255, 0.95);
            color: var(--text);
            transform: rotateY(180deg);
            text-align: left;
            overflow-y: auto;
        }

        .card-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.3));
        }

        .card-title {
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--gold);
        }

        .card-hint {
            font-size: 1.1rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        .reveal-btn {
            background: linear-gradient(45deg, var(--gold), #ffed4e);
            color: var(--text);
            border: none;
            padding: 12px 30px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
        }

        .reveal-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.6);
        }

        .back-content {
            width: 100%;
            height: 100%;
        }

        .back-content h3 {
            font-family: 'Dancing Script', cursive;
            font-size: 2.2rem;
            color: var(--primary);
            margin-bottom: 1rem;
            text-align: center;
        }

        .back-content p {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .back-image {
            width: 100%;
            max-height: 150px;
            object-fit: cover;
            border-radius: 10px;
            margin: 1rem 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--primary);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: var(--dark);
            transform: scale(1.1);
        }

        /* Progress Indicator */
        .progress-indicator {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 2rem;
            position: fixed;
            top: 20px;
            left: 0;
            right: 0;
            z-index: 100;
        }

        .progress-step {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid var(--primary);
            transition: all 0.3s ease;
        }

        .progress-step.active {
            background: var(--gold);
            border-color: var(--gold);
            transform: scale(1.2);
        }

        .progress-step.completed {
            background: var(--primary);
            border-color: var(--primary);
        }

        /* Buttons */
        .puzzle-btn {
            background: linear-gradient(45deg, var(--primary), var(--dark));
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
            font-weight: bold;
            box-shadow: 0 10px 30px rgba(255, 107, 139, 0.4);
        }

        .puzzle-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(255, 107, 139, 0.6);
        }

        .puzzle-btn:active {
            transform: translateY(-1px);
        }

        /* Background Elements */
        .floating-universe {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .floating-element {
            position: absolute;
            font-size: 24px;
            animation: float3D 8s infinite ease-in-out;
            filter: drop-shadow(0 0 10px currentColor);
        }

        @keyframes float3D {
            0%, 100% { 
                transform: translate3d(0, 0, 0) rotateY(0deg) rotateX(0deg);
            }
            25% { 
                transform: translate3d(100px, -50px, 50px) rotateY(90deg) rotateX(45deg);
            }
            50% { 
                transform: translate3d(-50px, -100px, 100px) rotateY(180deg) rotateX(90deg);
            }
            75% { 
                transform: translate3d(-100px, 50px, 50px) rotateY(270deg) rotateX(135deg);
            }
        }

        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -2;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--sparkle);
            border-radius: 50%;
            animation: particleFloat 20s infinite linear;
        }

        @keyframes particleFloat {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Magnetic Cursor */
        .magnetic-cursor {
            position: fixed;
            width: 40px;
            height: 40px;
            pointer-events: none;
            z-index: 10000;
            mix-blend-mode: difference;
            transition: transform 0.15s ease-out;
        }

        .cursor-inner {
            width: 8px;
            height: 8px;
            background: var(--primary);
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .cursor-outer {
            width: 40px;
            height: 40px;
            border: 2px solid var(--primary);
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: cursorPulse 2s infinite;
        }

        @keyframes cursorPulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.7; }
        }

        /* Celebration Animations */
        @keyframes celebrate {
            0%, 100% { 
                filter: hue-rotate(0deg) brightness(1);
                transform: scale(1);
            }
            25% { 
                filter: hue-rotate(90deg) brightness(1.2);
                transform: scale(1.02);
            }
            50% { 
                filter: hue-rotate(180deg) brightness(1.3);
            }
            75% { 
                filter: hue-rotate(270deg) brightness(1.2);
            }
        }

        @keyframes fireworkRise {
            0% {
                transform: translateY(0) scale(0.5) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-120vh) scale(1.5) rotate(360deg);
                opacity: 0;
            }
        }

        @keyframes sparkleFall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .puzzle-title {
                font-size: 2.5rem;
            }
            
            .memory-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .code-input {
                gap: 5px;
            }
            
            .code-digit {
                width: 50px;
                height: 70px;
                font-size: 2rem;
            }
            
            .wish-title {
                font-size: 3rem;
            }
            
            .progress-indicator {
                top: 10px;
            }
            
            .flip-card {
                height: 250px;
            }
            
            .card-icon {
                font-size: 3rem;
            }
            
            .card-title {
                font-size: 2rem;
            }
            
            .back-content h3 {
                font-size: 1.8rem;
            }
            
            .back-content p {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Magnetic Cursor -->    
    <div class="magnetic-cursor">
        <div class="cursor-inner"></div>
        <div class="cursor-outer"></div>
    </div>

    <!-- Animated Background -->
    <div class="particles" id="particlesContainer"></div>
    <div class="floating-universe" id="floatingUniverse"></div>

    <!-- Progress Indicator -->
    <div class="progress-indicator" id="progressIndicator">
        <div class="progress-step active" data-stage="1"></div>
        <div class="progress-step" data-stage="2"></div>
        <div class="progress-step" data-stage="3"></div>
    </div>

    <!-- Puzzle Stage 1: Heart Lock -->
    <section class="puzzle-stage stage-active" id="stage1">
        <div class="container">
            <div class="puzzle-container">
                <h2 class="puzzle-title">Puzzle 1: Unlock My Heart</h2>
                <p class="puzzle-instruction">Click the heart pieces in the correct order to unlock my heart!<br>Hint: Follow the path of love 💖</p>
                
                <div class="heart-lock" id="heartLock">
                    <div class="heart-piece piece-1">1</div>
                    <div class="heart-piece piece-2">2</div>
                    <div class="heart-piece piece-3">3</div>
                    <div class="heart-piece piece-4">4</div>
                </div>

                <button class="puzzle-btn" onclick="checkHeartLock()">Unlock My Heart</button>
            </div>
        </div>
    </section>

    <!-- Puzzle Stage 2: Memory Game -->
    <section class="puzzle-stage" id="stage2">
        <div class="container">
            <div class="puzzle-container">
                <h2 class="puzzle-title">Puzzle 2: Our Memories</h2>
                <p class="puzzle-instruction">Match the pairs to reveal our special moments!<br>Find all 6 matching pairs.</p>
                
                <div class="memory-grid" id="memoryGrid">
                    <!-- Cards will be generated by JavaScript -->
                </div>

                <div id="memoryStats" style="color: white; margin: 1rem 0;">
                    Matches: <span id="matchesCount">0</span>/6
                </div>
            </div>
        </div>
    </section>

    <!-- Puzzle Stage 3: Love Code -->
    <section class="puzzle-stage" id="stage3">
        <div class="container">
            <div class="puzzle-container">
                <h2 class="puzzle-title">Puzzle 3: Secret Love Code</h2>
                <p class="puzzle-instruction">Enter our special code!<br>Hint: It's the day we first met (DDMM)</p>
                
                <div class="code-input">
                    <input type="text" class="code-digit" maxlength="1" data-index="0">
                    <input type="text" class="code-digit" maxlength="1" data-index="1">
                    <input type="text" class="code-digit" maxlength="1" data-index="2">
                    <input type="text" class="code-digit" maxlength="1" data-index="3">
                </div>

                <button class="puzzle-btn" onclick="checkLoveCode()">Reveal My Heart</button>
                
                <p style="color: rgba(255,255,255,0.7); margin-top: 1rem; font-size: 0.9rem;">
                    Example: 1506 for June 15th
                </p>
            </div>
        </div>
    </section>

    <!-- Final Birthday Wish -->
    <section class="puzzle-stage" id="finalWish">
        <div class="container">
            <div class="puzzle-container final-wish">
                <h1 class="wish-title">Happy Birthday My Love! 🎂💖</h1>
                
                <div class="wish-message">
                    <p>Amar Sonai🥰🫂,</p>
                    <br>
                    <p>You've solved all the puzzles and unlocked the deepest chambers of my heart! 🗝️💖</p>
                    <br>
                    <p>On this special day, I want you to know how incredibly amazing you are. Your smile lights up my world, your laughter is my favorite melody, and your love is the greatest gift I've ever received.</p>
                </div>

                <!-- Flip Cards Section -->
                <div class="flip-cards">
                    <!-- Card 1 -->
                    <div class="flip-card" id="card1">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="card-icon">💝</div>
                                <h2 class="card-title">Our First Meeting</h2>
                                <p class="card-hint">Click reveal to see what made that day special</p>
                                <button class="reveal-btn" onclick="flipCard('card1')">Reveal Secret 💖</button>
                            </div>
                            <div class="flip-card-back">
                                <button class="close-btn" onclick="flipCard('card1')">×</button>
                                <div class="back-content">
                                    <h3>Our First Meeting</h3>
                                    <img src="https://images.unsplash.com/photo-1518568814500-bf0f8d125f46?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="First Meeting" class="back-image">
                                    <p>The moment our eyes met, I knew my life would never be the same. Your smile captured my heart instantly, and every day since has been a beautiful adventure filled with love and laughter.</p>
                                    <p>I still remember how nervous I was, but your warm presence made everything feel perfect from the very first second.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Card 2 -->
                    <div class="flip-card" id="card2">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="card-icon">🌟</div>
                                <h2 class="card-title">Special Moments</h2>
                                <p class="card-hint">Discover our most cherished memories together</p>
                                <button class="reveal-btn" onclick="flipCard('card2')">Reveal Memories ✨</button>
                            </div>
                            <div class="flip-card-back">
                                <button class="close-btn" onclick="flipCard('card2')">×</button>
                                <div class="back-content">
                                    <h3>Our Special Moments</h3>
                                    <img src="https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Special Moments" class="back-image">
                                    <p>Every moment with you feels like a beautiful dream come true. From our late-night talks to our spontaneous adventures, you make every second magical.</p>
                                    <p>Remember that time we stayed up all night talking? Or our first trip together? Those are the moments I'll cherish forever.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Card 3 -->
                    <div class="flip-card" id="card3">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="card-icon">🎂</div>
                                <h2 class="card-title">Today & Forever</h2>
                                <p class="card-hint">See what the future holds for us</p>
                                <button class="reveal-btn" onclick="flipCard('card3')">Reveal Future 🔮</button>
                            </div>
                            <div class="flip-card-back">
                                <button class="close-btn" onclick="flipCard('card3')">×</button>
                                <div class="back-content">
                                    <h3>Our Beautiful Future</h3>
                                    <img src="https://images.unsplash.com/photo-1530789257038-9d9358ed7e0e?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Future Together" class="back-image">
                                    <p>Celebrating the incredible person you are and the joy you bring to my life. I promise to cherish every moment with you and build a future filled with love, laughter, and endless adventures.</p>
                                    <p>I can't wait to create more beautiful memories with you and watch our love story continue to unfold.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="wish-message">
                    <p>Thank you for being you - beautiful, kind, funny, and everything wonderful wrapped into one amazing person.</p>
                    <br>
                    <p>May your birthday be as magical as you are, filled with joy, love, and all the happiness you deserve! 🎉✨</p>
                </div>

                <div class="love-signature">
                    Tomar,<br>
                    Babai 💝
                </div>

                <button class="puzzle-btn" onclick="createLoveFireworks()">Celebrate! 🎉</button>
            </div>
        </div>
    </section>

    <script>
        // ========== FLIP CARDS FUNCTIONALITY ==========
        function flipCard(cardId) {
            const card = document.getElementById(cardId);
            card.classList.toggle('flipped');
            
            // Add sparkle effect when revealing
            if (card.classList.contains('flipped')) {
                createSparkleEffect(card);
            }
        }

        // ========== PUZZLE 1: HEART LOCK ==========
        let heartSequence = [];
        const correctHeartSequence = [1, 3, 2, 4];

        function setupHeartLock() {
            const heartPieces = document.querySelectorAll('.heart-piece');
            heartPieces.forEach(piece => {
                piece.addEventListener('click', () => {
                    const pieceNumber = parseInt(piece.textContent);
                    heartSequence.push(pieceNumber);
                    
                    // Visual feedback
                    piece.style.background = 'var(--gold)';
                    piece.style.transform = 'scale(1.1)';
                    
                    setTimeout(() => {
                        piece.style.transform = '';
                    }, 300);
                    
                    // Reset if sequence gets too long
                    if (heartSequence.length > 4) {
                        resetHeartLock();
                    }
                });
            });
        }

        function checkHeartLock() {
            const isCorrect = JSON.stringify(heartSequence) === JSON.stringify(correctHeartSequence);
            
            if (isCorrect) {
                document.getElementById('heartLock').classList.add('solved');
                createSparkleEffect(document.getElementById('heartLock'));
                setTimeout(() => {
                    unlockNextStage(1);
                }, 1500);
            } else {
                resetHeartLock();
                alert('Not quite right, my love! Try again 💖\nHint: Think about the rhythm of our hearts');
            }
        }

        function resetHeartLock() {
            heartSequence = [];
            const pieces = document.querySelectorAll('.heart-piece');
            pieces.forEach(piece => {
                piece.style.background = 'var(--primary)';
            });
        }

        // ========== PUZZLE 2: MEMORY GAME ==========
        const memorySymbols = ['💖', '🌟', '🎂', '🎉', '💝', '✨', '💖', '🌟', '🎂', '🎉', '💝', '✨'];
        let flippedCards = [];
        let matchedPairs = 0;
        let canFlip = true;

        function setupMemoryGame() {
            const grid = document.getElementById('memoryGrid');
            grid.innerHTML = '';
            matchedPairs = 0;
            document.getElementById('matchesCount').textContent = '0';
            
            // Shuffle symbols
            const shuffledSymbols = [...memorySymbols].sort(() => Math.random() - 0.5);
            
            shuffledSymbols.forEach((symbol, index) => {
                const card = document.createElement('div');
                card.className = 'memory-card';
                card.dataset.symbol = symbol;
                card.dataset.index = index;
                card.innerHTML = '?';
                
                card.addEventListener('click', () => flipCardMemory(card));
                grid.appendChild(card);
            });
        }

        function flipCardMemory(card) {
            if (!canFlip || card.classList.contains('flipped') || card.classList.contains('matched')) {
                return;
            }
            
            card.classList.add('flipped');
            card.textContent = card.dataset.symbol;
            flippedCards.push(card);
            
            if (flippedCards.length === 2) {
                canFlip = false;
                checkForMatch();
            }
        }

        function checkForMatch() {
            const [card1, card2] = flippedCards;
            const isMatch = card1.dataset.symbol === card2.dataset.symbol;
            
            if (isMatch) {
                card1.classList.add('matched');
                card2.classList.add('matched');
                matchedPairs++;
                
                document.getElementById('matchesCount').textContent = matchedPairs;
                createSparkleEffect(card1);
                
                if (matchedPairs === 6) {
                    setTimeout(() => {
                        unlockNextStage(2);
                    }, 1000);
                }
                canFlip = true;
            } else {
                setTimeout(() => {
                    card1.classList.remove('flipped');
                    card2.classList.remove('flipped');
                    card1.textContent = '?';
                    card2.textContent = '?';
                    canFlip = true;
                }, 1000);
            }
            
            flippedCards = [];
        }

        // ========== PUZZLE 3: LOVE CODE ==========
        function setupLoveCode() {
            const digits = document.querySelectorAll('.code-digit');
            digits.forEach((digit, index) => {
                digit.addEventListener('input', (e) => {
                    const value = e.target.value;
                    if (value && index < digits.length - 1) {
                        digits[index + 1].focus();
                    }
                    
                    // Only allow numbers
                    if (!/^\d?$/.test(value)) {
                        e.target.value = '';
                    }
                });
                
                digit.addEventListener('keydown', (e) => {
                    if (e.key === 'Backspace' && !digit.value && index > 0) {
                        digits[index - 1].focus();
                    }
                });
            });
            
            // Focus first digit
            digits[0].focus();
        }

        function checkLoveCode() {
            const digits = document.querySelectorAll('.code-digit');
            const enteredCode = Array.from(digits).map(d => d.value).join('');
            
            // CHANGE THIS TO YOUR ACTUAL SPECIAL DATE! (DDMM format)
            const correctCode = "3109"; // Example: June 15th -> 1506
            
            if (enteredCode === correctCode) {
                createCelebrationEffect();
                setTimeout(() => {
                    showFinalWish();
                }, 2000);
            } else {
                // Shake animation for wrong code
                digits.forEach(digit => {
                    digit.style.animation = 'shake 0.5s ease';
                    setTimeout(() => {
                        digit.style.animation = '';
                        digit.value = '';
                    }, 500);
                });
                digits[0].focus();
                alert('Not the right code, my love! 💖\nHint: Remember our first meeting? DDMM format');
            }
        }

        // ========== STAGE MANAGEMENT ==========
        function unlockNextStage(currentStage) {
            // Update progress indicator
            document.querySelector(`.progress-step[data-stage="${currentStage}"]`).classList.remove('active');
            document.querySelector(`.progress-step[data-stage="${currentStage}"]`).classList.add('completed');
            document.querySelector(`.progress-step[data-stage="${currentStage + 1}"]`).classList.add('active');
            
            // Hide current stage, show next
            document.getElementById(`stage${currentStage}`).classList.remove('stage-active');
            
            if (currentStage === 3) {
                document.getElementById('finalWish').classList.add('stage-active');
            } else {
                document.getElementById(`stage${currentStage + 1}`).classList.add('stage-active');
                
                // Setup next puzzle
                if (currentStage === 1) {
                    setupMemoryGame();
                } else if (currentStage === 2) {
                    setupLoveCode();
                }
            }
            
            createSparkleStorm();
        }

        function showFinalWish() {
            // Hide all puzzle stages
            document.querySelectorAll('.puzzle-stage').forEach(stage => {
                stage.classList.remove('stage-active');
            });
            
            // Show final wish
            document.getElementById('finalWish').classList.add('stage-active');
            
            // Update progress indicator to show completion
            document.querySelectorAll('.progress-step').forEach(step => {
                step.classList.add('completed');
            });
            
            // Create massive celebration
            createLoveFireworks();
            
            // Scroll to top for better view
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ========== EFFECTS & ANIMATIONS ==========
        function createSparkleEffect(element) {
            for (let i = 0; i < 10; i++) {
                const sparkle = document.createElement('div');
                sparkle.innerHTML = '✨';
                sparkle.style.cssText = `
                    position: absolute;
                    font-size: 20px;
                    pointer-events: none;
                    z-index: 1000;
                    left: ${Math.random() * 100}%;
                    top: ${Math.random() * 100}%;
                    animation: sparkleFloat 1s ease-out forwards;
                `;
                
                element.appendChild(sparkle);
                
                setTimeout(() => {
                    if (sparkle.parentNode) {
                        sparkle.parentNode.removeChild(sparkle);
                    }
                }, 1000);
            }
        }

        function createSparkleStorm() {
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.innerHTML = '✨';
                    sparkle.style.cssText = `
                        position: fixed;
                        font-size: 24px;
                        pointer-events: none;
                        z-index: 1000;
                        left: ${Math.random() * 100}%;
                        top: ${Math.random() * 100}%;
                        animation: sparkleFall 2s ease-out forwards;
                    `;
                    
                    document.body.appendChild(sparkle);
                    
                    setTimeout(() => {
                        if (sparkle.parentNode) {
                            sparkle.parentNode.removeChild(sparkle);
                        }
                    }, 2000);
                }, i * 100);
            }
        }

        function createCelebrationEffect() {
            // Big sparkle storm
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.innerHTML = '✨';
                    sparkle.style.cssText = `
                        position: fixed;
                        font-size: 30px;
                        pointer-events: none;
                        z-index: 1000;
                        left: ${Math.random() * 100}%;
                        top: ${Math.random() * 100}%;
                        animation: sparkleFall 3s ease-out forwards;
                    `;
                    
                    document.body.appendChild(sparkle);
                    setTimeout(() => {
                        if (sparkle.parentNode) {
                            sparkle.parentNode.removeChild(sparkle);
                        }
                    }, 3000);
                }, i * 50);
            }
            
            // Background color celebration
            document.body.style.animation = 'celebrate 2s ease';
            setTimeout(() => {
                document.body.style.animation = '';
            }, 2000);
        }

        function createLoveFireworks() {
            const fireworksContainer = document.createElement('div');
            fireworksContainer.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                z-index: 999;
            `;
            document.body.appendChild(fireworksContainer);

            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const firework = document.createElement('div');
                    const types = ['💖', '🎉', '🌟', '✨', '🥳', '🎂', '💝', '🎊'];
                    firework.innerHTML = types[Math.floor(Math.random() * types.length)];
                    firework.style.cssText = `
                        position: absolute;
                        font-size: ${30 + Math.random() * 30}px;
                        left: ${Math.random() * 100}%;
                        top: ${100 + Math.random() * 20}%;
                        animation: fireworkRise ${2 + Math.random() * 2}s ease-out forwards;
                    `;
                    
                    fireworksContainer.appendChild(firework);
                    
                    setTimeout(() => {
                        if (firework.parentNode) {
                            firework.parentNode.removeChild(firework);
                        }
                    }, 3000);
                }, i * 200);
            }
            
            // Remove container after all fireworks
            setTimeout(() => {
                if (fireworksContainer.parentNode) {
                    fireworksContainer.parentNode.removeChild(fireworksContainer);
                }
            }, 15000);
        }

        // ========== BACKGROUND EFFECTS ==========
        function createParticles() {
            const container = document.getElementById('particlesContainer');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                const left = Math.random() * 100;
                const delay = Math.random() * 20;
                const duration = 10 + Math.random() * 20;
                
                particle.style.left = `${left}%`;
                particle.style.animationDelay = `${delay}s`;
                particle.style.animationDuration = `${duration}s`;
                
                container.appendChild(particle);
            }
        }

        function createFloatingUniverse() {
            const container = document.getElementById('floatingUniverse');
            const elements = ['💖', '🌟', '🎂', '🎉', '💝', '✨', '🎁', '🥳'];
            
            for (let i = 0; i < 20; i++) {
                const element = document.createElement('div');
                element.className = 'floating-element';
                element.innerHTML = elements[Math.floor(Math.random() * elements.length)];
                
                const left = Math.random() * 100;
                const top = Math.random() * 100;
                const delay = Math.random() * 8;
                const duration = 6 + Math.random() * 6;
                const color = `hsl(${Math.random() * 360}, 100%, 70%)`;
                
                element.style.left = `${left}%`;
                element.style.top = `${top}%`;
                element.style.animationDelay = `${delay}s`;
                element.style.animationDuration = `${duration}s`;
                element.style.color = color;
                
                container.appendChild(element);
            }
        }

        function setupMagneticCursor() {
            const cursor = document.querySelector('.magnetic-cursor');
            
            document.addEventListener('mousemove', (e) => {
                cursor.style.left = e.clientX + 'px';
                cursor.style.top = e.clientY + 'px';
            });

            // Magnetic effect for interactive elements
            const magneticElements = document.querySelectorAll('.heart-piece, .memory-card, .puzzle-btn, .code-digit, .flip-card, .reveal-btn');
            
            magneticElements.forEach(element => {
                element.addEventListener('mouseenter', () => {
                    cursor.style.transform = 'scale(1.5)';
                });
                
                element.addEventListener('mouseleave', () => {
                    cursor.style.transform = 'scale(1)';
                });
            });
        }

        // ========== INITIALIZATION ==========
        document.addEventListener('DOMContentLoaded', () => {
            setupHeartLock();
            createParticles();
            createFloatingUniverse();
            setupMagneticCursor();
            
            // Add celebration styles
            if (!document.getElementById('celebrationStyles')) {
                const style = document.createElement('style');
                style.id = 'celebrationStyles';
                style.textContent = `
                    @keyframes sparkleFloat {
                        0% {
                            transform: translateY(0) rotate(0deg);
                            opacity: 1;
                        }
                        100% {
                            transform: translateY(-50px) rotate(180deg);
                            opacity: 0;
                        }
                    }
                `;
                document.head.appendChild(style);
            }
        });
    </script>
</body>
</html>
